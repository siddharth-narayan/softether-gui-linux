import {
  a,
  e,
  s
} from "./chunk-KD5XTCN6.js";

// node_modules/@tauri-apps/api/chunk-ATGUPOGX.js
var m = {};
e(m, { Child: () => h, Command: () => l, EventEmitter: () => i, open: () => g });
async function p(o, e2, t = [], r) {
  return typeof t == "object" && Object.freeze(t), a({ __tauriModule: "Shell", message: { cmd: "execute", program: e2, args: t, options: r, onEventFn: s(o) } });
}
var i = class {
  constructor() {
    this.eventListeners = /* @__PURE__ */ Object.create(null);
  }
  addListener(e2, t) {
    return this.on(e2, t);
  }
  removeListener(e2, t) {
    return this.off(e2, t);
  }
  on(e2, t) {
    return e2 in this.eventListeners ? this.eventListeners[e2].push(t) : this.eventListeners[e2] = [t], this;
  }
  once(e2, t) {
    let r = (...s2) => {
      this.removeListener(e2, r), t(...s2);
    };
    return this.addListener(e2, r);
  }
  off(e2, t) {
    return e2 in this.eventListeners && (this.eventListeners[e2] = this.eventListeners[e2].filter((r) => r !== t)), this;
  }
  removeAllListeners(e2) {
    return e2 ? delete this.eventListeners[e2] : this.eventListeners = /* @__PURE__ */ Object.create(null), this;
  }
  emit(e2, ...t) {
    if (e2 in this.eventListeners) {
      let r = this.eventListeners[e2];
      for (let s2 of r)
        s2(...t);
      return true;
    }
    return false;
  }
  listenerCount(e2) {
    return e2 in this.eventListeners ? this.eventListeners[e2].length : 0;
  }
  prependListener(e2, t) {
    return e2 in this.eventListeners ? this.eventListeners[e2].unshift(t) : this.eventListeners[e2] = [t], this;
  }
  prependOnceListener(e2, t) {
    let r = (...s2) => {
      this.removeListener(e2, r), t(...s2);
    };
    return this.prependListener(e2, r);
  }
};
var h = class {
  constructor(e2) {
    this.pid = e2;
  }
  async write(e2) {
    return a({ __tauriModule: "Shell", message: { cmd: "stdinWrite", pid: this.pid, buffer: typeof e2 == "string" ? e2 : Array.from(e2) } });
  }
  async kill() {
    return a({ __tauriModule: "Shell", message: { cmd: "killChild", pid: this.pid } });
  }
};
var l = class extends i {
  constructor(t, r = [], s2) {
    super();
    this.stdout = new i();
    this.stderr = new i();
    this.program = t, this.args = typeof r == "string" ? [r] : r, this.options = s2 ?? {};
  }
  static sidecar(t, r = [], s2) {
    let a2 = new l(t, r, s2);
    return a2.options.sidecar = true, a2;
  }
  async spawn() {
    return p((t) => {
      switch (t.event) {
        case "Error":
          this.emit("error", t.payload);
          break;
        case "Terminated":
          this.emit("close", t.payload);
          break;
        case "Stdout":
          this.stdout.emit("data", t.payload);
          break;
        case "Stderr":
          this.stderr.emit("data", t.payload);
          break;
      }
    }, this.program, this.args, this.options).then((t) => new h(t));
  }
  async execute() {
    return new Promise((t, r) => {
      this.on("error", r);
      let s2 = [], a2 = [];
      this.stdout.on("data", (n) => {
        s2.push(n);
      }), this.stderr.on("data", (n) => {
        a2.push(n);
      }), this.on("close", (n) => {
        t({ code: n.code, signal: n.signal, stdout: s2.join(`
`), stderr: a2.join(`
`) });
      }), this.spawn().catch(r);
    });
  }
};
async function g(o, e2) {
  return a({ __tauriModule: "Shell", message: { cmd: "open", path: o, with: e2 } });
}

export {
  m,
  i,
  h,
  l,
  g
};
//# sourceMappingURL=chunk-X425TAC3.js.map
